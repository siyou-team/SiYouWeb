(function(_x33473){'use strict';var app=getApp(),$=require(_x33473[0]),WxParse=require(_x33473[1]),app=getApp();Page({data:{index:-1,count:13,timer:0,speed:20,times:0,cycle:50,prize:-1,click:!1,clickmsk:!1,clickshare:!1,drawdesc:[],PrizeList:[],DrawInfo:{},RemainingCount:0,PrizeResult:{},rows:[],Coupons:[],isCancelSuccess:!0,isCancel:!0,CouponAmount:0,IsNewUser:0,isPage:!1,outdated:!1},onLoad:function(t){var a=this;$[_x33473[2]](app[_x33473[4]][_x33473[3]])?app[_x33473[5]](function(t){t&&(a[_x33473[6]]({IsNewUser:app[_x33473[4]][_x33473[3]][_x33473[7]],CouponAmount:app[_x33473[4]][_x33473[3]][_x33473[8]]}),a[_x33473[9]]());},t[_x33473[10]]):a[_x33473[9]]();},onShareAppMessage:function(){var t=this;return this[_x33473[6]]({clickshare:!1,click:!1}),{title:_x33473[11],desc:_x33473[12],path:_x33473[13]+app[_x33473[4]][_x33473[3]][_x33473[14]],success:function(a){t[_x33473[15]]();}};},sharefriend:function(){var t={Category:1},a=this;$[_x33473[16]]($[_x33473[17]](activityapi[_x33473[18]],t),function(t){0==t[_x33473[19]]&&null!=t[_x33473[20]]&&(a[_x33473[6]]({RemainingCount:a[_x33473[22]][_x33473[21]]}),a[_x33473[9]]());});},initData:function(){console[_x33473[23]](app[_x33473[4]]);var t={activity_type:1,activity_type_id:app[_x33473[25]][_x33473[24]],store_id:1001},a=this;$[_x33473[26]]({url:app[_x33473[30]][_x33473[29]][_x33473[28]][_x33473[27]],data:t,success:function(t,i,e,s){if(a[_x33473[6]]({isPage:!0,ImgPath:app[_x33473[4]][_x33473[31]]}),console[_x33473[32]](app[_x33473[4]][_x33473[31]]),200==i){if(a[_x33473[6]]({DrawInfo:t,RemainingCount:t[_x33473[33]],outdated:t[_x33473[34]],PrizeList:t[_x33473[35]],activity_id:t[_x33473[36]]}),a[_x33473[22]][_x33473[39]][_x33473[38]][_x33473[35]][_x33473[37]]>0){for(var n=a[_x33473[22]][_x33473[39]][_x33473[38]][_x33473[35]][_x33473[37]]%5>0?parseInt(a[_x33473[22]][_x33473[39]][_x33473[38]][_x33473[35]][_x33473[37]]/5+1):a[_x33473[22]][_x33473[39]][_x33473[38]][_x33473[35]][_x33473[37]]/5,c=[],o=0;o<n;o++)c[_x33473[40]](o);a[_x33473[6]]({rows:c});}$[_x33473[2]](t[_x33473[42]][_x33473[41]])||WxParse[_x33473[43]](_x33473[44],_x33473[45],t[_x33473[42]][_x33473[41]],a);}else a[_x33473[6]]({outdated:!1});}});},getPosition:function(){var t={activity_id:this[_x33473[22]][_x33473[36]]},a=this;$[_x33473[26]]({url:app[_x33473[30]][_x33473[29]][_x33473[28]][_x33473[46]],data:t,success:function(t,i,e,s){200==i?(a[_x33473[6]]({prize:t[_x33473[47]],PrizeResult:t}),a[_x33473[48]]()):a[_x33473[6]]({prize:-1,times:0,click:!1});}});},LuckDraw:function(){this[_x33473[22]][_x33473[49]]||(this[_x33473[6]]({speed:100,click:!0}),this[_x33473[22]][_x33473[21]]>0?this[_x33473[50]]():0==this[_x33473[22]][_x33473[21]]&&this[_x33473[6]]({clickshare:!0}));},luckRoll:function(){var t=this[_x33473[22]][_x33473[47]],a=this[_x33473[22]][_x33473[51]];t+=1,t>a-1&&(t=0),this[_x33473[6]]({index:t});},roll:function(){if(this[_x33473[6]]({times:this[_x33473[22]][_x33473[52]]+1}),this[_x33473[53]](),this[_x33473[22]][_x33473[52]]>this[_x33473[22]][_x33473[54]]+10&&this[_x33473[22]][_x33473[55]]==this[_x33473[22]][_x33473[47]]){clearTimeout(this[_x33473[22]][_x33473[56]]),this[_x33473[6]]({prize:-1,times:0,click:!1}),this[_x33473[9]]();var t=this;setTimeout(function(){t[_x33473[6]]({clickmsk:!0});},800);}else{if(this[_x33473[22]][_x33473[52]]<this[_x33473[22]][_x33473[54]])this[_x33473[6]]({speed:this[_x33473[22]][_x33473[57]]-10});else if(this[_x33473[22]][_x33473[52]]==this[_x33473[22]][_x33473[54]]){var a=this[_x33473[22]][_x33473[55]]+1;this[_x33473[6]]({prize:a});}else this[_x33473[22]][_x33473[52]]>this[_x33473[22]][_x33473[54]]+10&&(0==this[_x33473[22]][_x33473[55]]&&7==this[_x33473[22]][_x33473[47]]||this[_x33473[22]][_x33473[55]]==this[_x33473[22]][_x33473[47]]+1)?this[_x33473[6]]({speed:this[_x33473[22]][_x33473[57]]+110}):this[_x33473[6]]({speed:this[_x33473[22]][_x33473[57]]+20});this[_x33473[22]][_x33473[57]]<40&&this[_x33473[6]]({speed:this[_x33473[22]][_x33473[57]]+40});var t=this;this[_x33473[22]][_x33473[56]]=setTimeout(function(){t[_x33473[48]]();},t[_x33473[22]][_x33473[57]]);}return!1;},cancelprize:function(){this[_x33473[6]]({clickmsk:!1});},cancelshare:function(){this[_x33473[6]]({clickshare:!1}),this[_x33473[6]]({prize:-1,times:0,click:!1});},nothing:function(){},doReceive:function(){this[_x33473[58]](),this[_x33473[59]]();},cancel:function(){this[_x33473[6]]({isCancel:!1});},cancelsuccess:function(){this[_x33473[6]]({isCancelSuccess:!0});},innertouch:function(){},userReceiveCoupon:function(){var t={activity_id:this[_x33473[22]][_x33473[36]],activity_type:1,activity_type_id:app[_x33473[25]][_x33473[24]]},a=this;$[_x33473[26]]({url:app[_x33473[30]][_x33473[29]][_x33473[28]][_x33473[60]],data:t,success:function(t,i,e,s){200==i?a[_x33473[6]]({isCancelSuccess:!1,Coupons:t[_x33473[35]]}):$[_x33473[61]](e);}});}});}.call(this,['../../helpers/util.js','../../wxParse/wxParse.js','isNull','userInfo','globalData','getUserInfo','setData','IsNewUser','CouponAmount','initData','uid','\u6211\u5df2\u7ecf\u4e2d\u5956\u5566\uff0c\u4f60\u4e5f\u8d76\u7d27\u6765\u62bd\u5956\u5427~','\u5e78\u8fd0\u5927\u62bd\u5956\uff0c\u5feb\u6765\u53c2\u4e0e\u5427~','/pages/luckydraw/luckydraw?uid=','user_id','sharefriend','xsr1','makeUrl','ShareLuckyDraw','Code','Info','RemainingCount','data','info','ACTIVITY_TYPE_LOTTERY','StateCode','request','listsLottery','user','URL','Config','imgPath','log','remaining_count','outdated','items','activity_id','length','winner_rows','DrawInfo','push','activity_intro','activity_rule','wxParse','drawdesc','html','doLottery','index','roll','click','getPosition','count','times','luckRoll','cycle','prize','timer','speed','cancel','userReceiveCoupon','listsLotteryHistory','alert']));